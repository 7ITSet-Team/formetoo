!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="public/",n(n.s=23)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("nodemailer")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("@babel/runtime/helpers/objectSpread")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"user",function(){return B}),n.d(r,"role",function(){return F}),n.d(r,"order",function(){return M}),n.d(r,"product",function(){return L}),n.d(r,"page",function(){return W}),n.d(r,"category",function(){return P});var a=n(14),s=n.n(a),i=n(16),o=n.n(i),l=n(17),c=n.n(l),u={connection:{port:8082},jwt:{secret:"SYW/:ZIFrxd')ueR#<Oj,ABzutT]QI({%MekfS9(l|7NM-&m6RTgP@)X44sOGVE",lifetime:2592e6},db:{url:"mongodb://localhost/formetoo"},nodemailer:{host:"smtp.gmail.com",port:465,secure:!0,auth:{user:"formetood@gmail.com",pass:"topotop123"}},contacts:{support:{mail:"support@formetoo.ru"}}},p=n(1),f=n.n(p),m=n(2),d=n.n(m),g=n(3),h=n.n(g),v=n(4),y=n.n(v),b=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.category.getAll();case 2:return s=e.sent,e.abrupt("return",{result:s});case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),x=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.slug,e.next=3,t.category.getBySlug(s);case 3:return i=e.sent,e.next=6,i.getProducts();case 6:return o=e.sent,e.abrupt("return",{result:o});case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),k=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.slug,e.next=3,t.product.getBySlug(s);case 3:return i=e.sent,e.abrupt("return",{result:i});case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),w=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.slug,e.next=3,t.page.getBySlug(s);case 3:return i=e.sent,e.abrupt("return",{result:i});case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.page.getMainMenu();case 2:return s=e.sent,e.abrupt("return",{result:s});case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),z=n(13),S=n.n(z),q=n(11),N=n.n(q),A=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i,o,l,c,p,m,d,g,h,v;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.email,i=a.password,e.next=3,t.user.getByEmail(s);case 3:if(o=e.sent,l={result:void 0,error:"incorrect login-password pair"},o){e.next=7;break}return e.abrupt("return",l);case 7:if(o.isActive){e.next=9;break}return e.abrupt("return",{result:void 0,error:"need to activate account"});case 9:return e.next=11,S.a.compare(i,o.password);case 11:if(!e.sent){e.next=30;break}if(c=(void 0).user,p=c.role,m=c.visibility,e.t1=o.role,!e.t1){e.next=19;break}return e.next=18,t.role.getByName(o.role);case 18:e.t1=e.sent;case 19:if(e.t0=e.t1,e.t0){e.next=22;break}e.t0={};case 22:return d=e.t0,g=d.permissions,h=void 0===g?[]:g,v=N.a.sign({id:o._id},u.jwt.secret),r.cookie("JWT",v,{maxAge:u.jwt.lifetime,httpOnly:!0}),e.abrupt("return",{result:{visibility:m,role:p,permissions:h}});case 30:return e.abrupt("return",l);case 31:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),T=function(){var e=d()(f.a.mark(function e(t,n,r,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.clearCookie("JWT"),e.abrupt("return");case 2:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),_=n(15),O=n.n(_),j=function(e){return"\n<p>\n    Здравствуйте! Спасибо за вашу регистрацию на сайте http://formetoo.ru! Чтобы активировать аккаунт, нажмите на кнопку ниже: \n</p>\n<p>\n    <a href=".concat(e.link,">Завершить регистрацию</a>\n</p>\n")},H=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i,o,l,c,p,m,d,g,h,v,y;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.password,i=a.phone,o=a.email,l=a.name,c=a.lastname,e.next=3,t.user.getByEmail(o);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",{result:void 0,error:"this email address is busy"});case 6:return e.next=8,S.a.genSalt(10);case 8:return p=e.sent,e.next=11,S.a.hash(s,p);case 11:return m=e.sent,d=new t.user({email:o,phone:i,password:m,name:l,lastname:c,visibility:["shop"],isActive:!1}).save(),g=O.a.createTransport(u.nodemailer),h=n.protocol+"://"+n.host,v="".concat(h,"/account/verify/").concat(d._id),y={from:u.contacts.support.mail,to:o,subject:"Account activation",html:j({link:v})},g.sendMail(y,function(e){if(e)throw e}),e.abrupt("return");case 19:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),D=function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.id,e.next=3,t.user.activateById(s);case 3:return i=N.a.sign({id:s},u.jwt.secret),r.cookie("JWT",i,{maxAge:u.jwt.lifetime,httpOnly:!0}),e.abrupt("return");case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),I={catalog:{categories:{handler:b,visibility:["quest"]},category:{handler:x,visibility:["quest"]},product:{handler:k,visibility:["quest"]}},cart:{info:{handler:function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.order.getByUserOrOrderToken(a.userByToken,n.cookies.orderJWT);case 2:if(s=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,s.cart();case 7:return i=e.sent,e.abrupt("return",{result:i});case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),visibility:["quest"]},order:{handler:function(){var e=d()(f.a.mark(function e(t,n,r,a){var s,i,o,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.userByToken,i=t.order.getByUserOrOrderToken(s,n.cookies.orderJWT)){e.next=4;break}return e.abrupt("return");case 4:return i.setStatus("ordered"),o=O.a.createTransport(u.nodemailer),l={from:u.contacts.support.mail,to:s.email,subject:"Thanks for your order",html:"\n<p>\n    Здравствуйте! Ваш заказ был успешно принят. В данный момент он обрабатывается.\n</p>\n"},o.sendMail(l,function(e){if(e)throw e}),e.abrupt("return");case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),visibility:["shop"]}},content:{page:{handler:w,visibility:["quest"]},"main-menu":{handler:E,visibility:["quest"]}},auth:{login:{handler:A,visibility:["quest"]},logout:{handler:T,visibility:["quest"]},registration:{handler:H,visibility:["quest"]},verify:{handler:D,visibility:["quest"]}}},C=n(9),R=n.n(C),B=function(e){var t=new R.a.Schema({email:{type:String,unique:!0,required:!0},password:{type:String,required:!0},phone:{type:String,unique:!0,required:!0},name:{type:String,required:!0},lastname:{type:String,required:!0},visibility:[String],isActive:{type:Boolean,required:!0},role:String},{collection:"user"});t.statics.getByToken=function(){var e=d()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.a.verify(t,u.jwt.secret),e.next=3,this.findOne({_id:new R.a.Types.ObjectId(n.id)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.statics.getByEmail=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLocaleLowerCase(),e.next=3,this.findOne({email:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.methods.activateById=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.update({_id:new R.a.Types.ObjectId(t)},{$set:{isActive:!0}});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.set("autoIndex",!1),e.user=R.a.model("user",t)},F=function(e){var t=new R.a.Schema({name:{type:String,unique:!0,required:!0},alias:String,permissions:[String]},{collection:"role"});t.statics.getByName=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findOne({name:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.set("autoIndex",!1),e.role=R.a.model("role",t)},M=function(e){var t=new R.a.Schema({userID:R.a.Schema.Types.ObjectId,createDate:Date,products:[],statusDate:Date,status:{type:String,required:!0}},{collection:"order"});t.statics.getByUser=function(){var e=d()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find({userID:new R.a.Types.ObjectId(t._id),status:{$not:"closed"}});case 2:if(!((n=e.sent)&&n.length>0)){e.next=5;break}return e.abrupt("return",n.sort(function(e,t){return t.createDate-e.createDate})[0]);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.statics.getByOrderToken=function(){var e=d()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N.a.verify(t,u.jwt.secret),e.next=3,this.findOne({_id:new R.a.Types.ObjectId(n.id),status:{$not:"closed"}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.statics.getByUserOrOrderToken=function(){var e=d()(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,this.order.getByUser(t);case 3:return e.abrupt("return",e.sent);case 4:if(!n){e.next=8;break}return e.next=7,this.order.getByOrderToken(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.methods.setStatus=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.status=t,e.next=3,this.save();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.methods.cart=d()(f.a.mark(function t(){var n,r,a,s,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},r=0,a=0,s=this.products.map(function(e){return n[e._id]=e.count,e._id}),t.next=6,e.product.find({_id:{$in:s}},{__v:0});case 6:return(i=t.sent).forEach(function(e){e.count=n[e._id]||0,a+=e.count,r+=e.count*e.price}),t.abrupt("return",{products:i,count:a,sum:r});case 9:case"end":return t.stop()}},t,this)})),t.set("autoIndex",!1),e.order=R.a.model("order",t)},L=function(e){var t=new R.a.Schema({categoryID:{type:R.a.Schema.Types.ObjectId,required:!0},code:{type:String,unique:!0},name:{type:String,unique:!0,required:!0},slug:{type:String,unique:!0,required:!0},price:{type:Number,required:!0},media:[String],props:[{name:{type:String,unique:!0,required:!0},value:{}}]},{collection:"product"});t.statics.getBySlug=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findOne({slug:t},{__v:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.statics.getByCategoryID=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find({categoryID:new R.a.Types.ObjectId(t)},{__v:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.set("autoIndex",!1),e.product=R.a.model("product",t)},W=function(e){var t=new R.a.Schema({slug:{type:String,unique:!0},name:{type:String,required:!0,unique:!0},title:{type:String,unique:!0},content:{type:String},position:{type:Number,required:!0}},{collection:"page"});t.statics.getMainMenu=d()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find({},{_id:0,slug:1,name:1},{sort:{position:1}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),t.statics.getBySlug=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findOne({slug:t},{_id:0,__v:0,position:0,name:0,slug:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.set("autoIndex",!1),e.page=R.a.model("page",t)},P=function(e){var t=new R.a.Schema({name:{type:String,required:!0,unique:!0},img:String,slug:{type:String,required:!0,unique:!0}},{collection:"category",autoIndex:!1});t.statics.getAll=d()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find({},{_id:0,__v:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),t.statics.getBySlug=function(){var e=d()(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findOne({slug:t},{__v:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.methods.getProducts=d()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.product.getByCategoryID(this._id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),t.set("autoIndex",!1),e.category=R.a.model("category",t)},U=n(18),V=n.n(U),J=[{slug:"",name:"Главная",title:"Продажа жироуловителей",content:'<span class="jss240"><p style="text-align:center;"></p>\n<img src="http://bio.alta-region.com/d/811290/d/palets_vverkh.jpg" alt="undefined" style="float:none;height: auto;width: auto">\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 22px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"="">Наши преимущества</span></p>\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 15px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"=""><strong>- Курьерская Доставка</strong></span></p>\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 15px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"=""><strong>- Большой ассортимент</strong></span></p>\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 15px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"=""><strong>- Удобная система оплаты</strong></span></p>\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 15px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"=""><strong>- Гибкая система скидок</strong></span></p>\n<p style="text-align:center;"><span style="color: rgb(102,102,102);font-size: 15px;font-family: Arial, " helvetica="" neue",="" helvetica,="" sans-serif;"=""><strong>- Склады в Москве и Санкт-Петербурге</strong></span><br></p>\n</span>'},{slug:"catalog",name:"Каталог",title:"",content:""},{slug:"promotion",name:"Акции",title:"Акции",content:'<span class="jss252"><p style="text-align:center;"><span style="color: rgb(0,128,0);font-size: 16px;font-family: Times New Roman;"><strong>АКЦИЯ "БЕСПЛАТНАЯ ДОСТАВКА жироуловителей"</strong></span></p>\n<p style="text-align:left;"><span style="color: rgb(0,0,0);font-size: 12pt;font-family: times new roman;">Приобретите жироуловитель (пиковый сброс <strong>до 175 л</strong>) в нашем интернет-магазине и мы доставим этот товар ТК "ПЭК"&nbsp;до&nbsp;ближайшего к Вам терминала (</span><a href="http://pecom.ru/contacts/list-filials/" target="_blank"><span style="color: rgb(0,0,0);background-color: transparent;font-size: 12pt;font-family: times new roman;">все терминалы&nbsp;ПЭК</span></a><span style="color: rgb(0,0,0);font-size: 12pt;font-family: times new roman;">)&nbsp;абсолютно</span> <span style="color: rgb(0,0,0);font-size: 12pt;font-family: times new roman;"><strong>бесплатно*</strong>для Вас</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Акция не распространяется на Дальневосточный и Сибирский ФО, Республику Дагестан, Калининградскую область</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Акция действует до 31.08.2018 года!!!</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Акция распространяется на жироуловители (пиковый сброс до 175 л), биопрепараты</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Акция действует при оплате товара по ценам, указанным на сайте</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка осуществляется не ранее, чем на следующий день&nbsp;</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка в регионы бесплатна при: 100% оплате товара на сумму более 3000 р.</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка по акции в регионы осуществляется ТК "ПЭК"</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка в пределах МКАД бесплатна как при оплате товара курьеру, так и при предоплате</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка в пределах КАД бесплатна как при оплате товара курьеру, так и при предоплате (только из наличия на складе в СПб)</span><br><span style="color: rgb(102,102,102);font-size: 14px;font-family: Times New Roman;">*Доставка за пределы КАД и МКАД оплачивается 30 р/км (расчет ведется согласно данным яндекс.навигатор в одну сторону)</span></p>\n</span>'},{slug:"delivery",name:"Доставка и оплата",title:"Доставка",content:'<span class="jss264"><h2 style="text-align:left;"><span style="color: rgb(255,255,255);background-color: rgb(2,134,82);font-size: 22px;">Оплата товаров</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">-</span> <span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>Предоплата.&nbsp;Оплата по счету</strong>. Счет можно получить оформив заказ на сайте или позвонив нашим менеджерам. После оформления заказа Вам выставляется счет на оплату, который действителен в течение трех рабочих дней. Счет также можно распечатать в разделе "Мои заказы".</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">-</span> <span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>Предоплата.&nbsp;Оплата по квитанции</strong>. Квитанцию&nbsp;можно получить оформив заказ на сайте или позвонив нашим менеджерам. После оформления заказа квитанция формируется автоматически в разделе "Мои заказы". Квитанция действительна в течение трех рабочих дней.&nbsp;</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">-</span> <span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>Оплата наличными при получении у курьера</strong>. Оплата наличными производится курьеру при получении.</span> <br><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Стоимость доставки (менее 15 кг) - 600 (шестьсот) рублей&nbsp;(Бесплатно по акции) - в пределах МКАД (г. Москва)</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>- Оплата при получении на терминале ПЭК. &nbsp;</strong></span><br><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Стоимость доставки Транспортной Компанией ПЭК до терминала ПЭК для ЦФО составляет от 800 р. (в акциях не участвует)</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>- Оплата при получении на Почте России (уточняйте возможность).&nbsp;</strong></span><br><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Стоимость доставки Почтой России рассчитывается для каждого отправления. Не все товары могут быть отправлены Почтой России. Почта России взымает дополнительную комиссию за перевод денег.</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">-&nbsp;<strong>Оплата наличными при самовывозе</strong>. Оплата наличными производится на складе.&nbsp;</span><br><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Самовывоз товаров со склада в г.Москва (</span><a href="http://bio.alta-region.com/kontakty" target="_blank"><span style="color: rgb(0,136,204);background-color: transparent;font-size: 13px;font-family: Arial, Helvetica, sans-serif;">адрес</span></a><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">) - бесплатно</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">-&nbsp;<strong>Предоплата. Безопасная оплата&nbsp;на сайте</strong>. Оплата производится через яндекс.кассы (</span><a href="https://money.yandex.ru/actions" target="_blank"><span style="color: rgb(0,136,204);background-color: transparent;font-size: 13px;font-family: Arial, Helvetica, sans-serif;">яндекс.деньги</span></a><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">) прямо на сайте.</span> <br><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Оплатить можно оформив заказ на сайте. При оформлении заказа необходимо выбрать пункт "Яндекс.Деньги. Оплата на сайте). После оформления заказа оплата поступает моментально.</span></p>\n<h2 style="text-align:left;"><span style="color: rgb(255,255,255);background-color: rgb(2,134,82);font-size: 22px;">Стоимость доставки жироуловителя</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>По России:</strong></span> <span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Точную стоимость доставки в любой город Вы можете рассчитать в карточке каждого товара на вкладке "Доставка", либо обратившись к нашим менеджерам.&nbsp;Бесплатно по акции.</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>В пределах МКАД (г.Москва):</strong></span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">- Стоимость доставки жироуловителя курьером в пределах МКАД составляет 600 рублей (Бесплатно по акции).</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">- Доставка подмоечных жироуловителей в г.Москва, производство которых находится в других городах, "До дверей"составляет от 900 рублей.</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Доставка из других регионов осуществляется Транспортными Компаниями (Деловые Линии, ПЭК и др.)&nbsp;</span></p>\n<p style="text-align:left;">&nbsp;</p>\n<h2 style="text-align:left;"><span style="color: rgb(51,51,51);font-size: 24px;">Доставка в Республики</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Уточняйте возможность доставки в Республики&nbsp;</span></p>\n<h2 style="text-align:left;"><span style="color: rgb(255,255,255);background-color: rgb(2,134,82);font-size: 22px;">О документах</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">При оплате наличными Покупателю предоставляется кассовый (он же товарный) чек.</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">При безналичной оплате (на р/с предприятия) Покупателю предоставляется Товарная Накладная и счет-фактура&nbsp;</span></p>\n<p style="text-align:left;">&nbsp;</p>\n<h2 style="text-align:center;"><span style="color: rgb(255,255,255);background-color: rgb(2,134,82);font-size: 22px;">Уважаемый покупатель!</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">Чтобы приобрести какой-либо товар на нашем сайте Вам необходимо:&nbsp;</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">1. Позвонить нашему менеджеру&nbsp;</span><a href="tel:+74994040557" target="_self"><span style="color: rgb(0,136,204);background-color: transparent;font-size: 13px;font-family: Arial, Helvetica, sans-serif;">+7&nbsp;(499) 404-05-57</span></a></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;"><strong>ЛИБО</strong></span></p>\n<p><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">1. Добавить товар в корзину (это можно сделать &nbsp;при просмотре товара)</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">2. Перейти в "корзину"</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">3. Войти в свой профиль или выбрать пункт "купить без регистрации"</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">4. Выбрать способ доставки</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">5. Ввести свое имя, телефон</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">6. Выбрать способ оплаты (наличными менеджеру, квитанцией, оплата счета или через Яндекс.Деньги)</span></p>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">7. Ожидать звонка менеджера нашей компании.</span></p>\n<p style="text-align:left;">&nbsp;</p>\n<h2 style="text-align:left;"><span style="color: rgb(51,51,51);font-size: 24px;">О возвратах</span></h2>\n<p style="text-align:left;"><span style="color: rgb(102,102,102);font-size: 13px;font-family: Arial, Helvetica, sans-serif;">В случае необходимости возврата товара по любым причинам перевозка до склада Продавца/Поставщика оплачивается Покупателем (стороной, которая возвращает Товар).</span></p>\n</span>'},{slug:"about",name:"О компании",title:"О компании",content:"В то время как космические корабли бороздят..."},{slug:"contacts",name:"Контакты",title:"Контакты",content:'<span class="jss288"><p style="text-align:left;"><span style="color: rgb(51,51,51);font-size: 18px;font-family: Times New Roman;"><strong>Москва:&nbsp;</strong></span><a href="tel:+74994040557" target="_self"><span style="color: rgb(51,51,51);background-color: transparent;font-size: 11pt;font-family: Times New Roman;"><strong>+7 (499) 404-05-57</strong></span></a><br><span style="color: rgb(51,51,51);font-size: 18px;font-family: Times New Roman;"><strong>Санкт-Петербург:</strong></span> <a href="tel:+78124095254" target="_self"><span style="color: rgb(51,51,51);background-color: transparent;font-size: 11pt;font-family: Times New Roman;"><strong>+7 (812) 409-52-54</strong></span></a></p>\n<p style="text-align:left;"><span style="color: rgb(51,51,51);font-size: 18px;font-family: Times New Roman;"><strong>написать в:&nbsp;</strong></span> <a href="https://api.whatsapp.com/send?phone=79190349987" target="_self"><span style="color: rgb(51,51,51);background-color: transparent;font-size: 11pt;font-family: Times New Roman;"><strong>Whatsapp</strong></span></a><span style="color: rgb(51,51,51);font-size: 11pt;font-family: Times New Roman;"><strong>&nbsp;.....&nbsp;</strong></span><a href="viber://add?number=79190349987" target="_self"><span style="color: rgb(51,51,51);background-color: transparent;font-size: 11pt;font-family: Times New Roman;"><strong>Viber</strong></span></a></p>\n<p style="text-align:left;"><span style="color: rgb(51,51,51);font-size: 18px;font-family: Times New Roman;"><strong>написать на почту:&nbsp;</strong></span><a href="mailto:alta-region@mail.ru" target="_self"><span style="color: rgb(51,51,51);background-color: transparent;font-size: 11pt;font-family: Times New Roman;"><strong>alta-region@mail.ru</strong></span></a></p>\n<p style="text-align:left;"></p>\n<p style="text-align:center;"></p>\n</span>'}],$=[{slug:"vse_zhirouloviteli",name:"Жироуловители",img:"/uploads/on5fbrxucpmhtzkklqtm.jpg"},{slug:"zhirouloviteli_pod_moyku",name:"Жироуловители под мойку",img:"/uploads/on5fbrxucpmhtzkklqtm.jpg"},{slug:"mufty-dlya-trub",name:"Муфты для труб и кабелей",img:"/uploads/on5fbrxucpmhtzkklqtm.jpg"}],G=[{},{},{},{},{},{},{},{},{}],Q=[];Object.keys(I).forEach(function(e){var t=I[e];Object.keys(t).forEach(function(e){var n=t[e];n.permission&&Q.push(n.permission)})});var X=[{name:"root",alias:"Суперпользователь",permissions:Q}],Y=function(){function e(){h()(this,e)}return y()(e,null,[{key:"init",value:function(t){this.db=t,e.generate()}},{key:"generate",value:function(){var t=d()(f.a.mark(function t(){var n,r,a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.next=3,e.setData("page",J,function(){var e=d()(f.a.mark(function e(t,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new r(V()({},t,{position:++n})).save();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}());case 3:return t.next=5,e.setData("category",$,function(){var e=d()(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new n(t).save();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}());case 5:return r=0,t.next=8,e.setData("product",G,function(){var e=d()(f.a.mark(function e(t,n){var s,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.db.category.findOne();case 2:return s=e.sent,t.categoryID=s._id,t.code="ART"+ ++r,t.name="Продукт "+r,t.slug="product"+r,t.price=1e3*r,i="/uploads/on5fbrxucpmhtzkklqtm.jpg",t.media=[i,i,i],t.props=[{name:"Производитель",value:"Китай"},{name:"Любой параметр",value:"Любое значение"},{name:"Любой параметр2",value:"Любое значение2"},{name:"Любой параметр3",value:"Любое значение3"},{name:"Любой параметр4",value:"Любое значение4"},{name:"Любой параметр5",value:"Любое значение5"}],e.next=13,new n(t).save();case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}());case 8:return t.next=10,e.setData("role",X,function(){var e=d()(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new n(t).save();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}());case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setData",value:function(){var e=d()(f.a.mark(function e(t,n,r){var a=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db[t].countDocuments();case 2:if(e.t0=e.sent,!(e.t0>0)){e.next=5;break}return e.abrupt("return");case 5:n.forEach(function(){var e=d()(f.a.mark(function e(n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n,a.db[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),Z=function(){function e(){h()(this,e)}return y()(e,null,[{key:"init",value:function(t){R.a.connect(u.db.url,{autoIndex:!1}),R.a.connection.on("error",console.error.bind(console,"connection error:")),R.a.connection.once("open",function(){e.inited=!0}),e.db={},Object.keys(r).forEach(function(t){return r[t](e.db)}),Y.init(e.db)}},{key:"route",value:function(e,t){return(I[e]||{})[t]||{}}},{key:"auth",value:function(){var t=d()(f.a.mark(function t(n,r){var a,s,i,o,l,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.visibility.includes("quest")){t.next=4;break}return t.abrupt("return",{status:!0,user:void 0});case 4:if(r){t.next=8;break}return t.abrupt("return",{status:!1,user:void 0});case 8:return t.next=10,e.db.user.getByToken(r);case 10:if(a=t.sent,s=!1,(a&&a.visibility||[]).forEach(function(e){return s=s||n.visibility.includes(e)}),i=!0,!n.permission){t.next=27;break}if(i=!1,!a.role){t.next=27;break}return t.next=19,e.db.role.getByName(a.role);case 19:if(t.t0=t.sent,t.t0){t.next=22;break}t.t0={};case 22:o=t.t0,l=o.permissions,c=void 0===l?[]:l,i=i&&c.includes(n.permission),a.permissions=c;case 27:return t.abrupt("return",{status:s&&i,user:a});case 28:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"router",value:function(){var t=d()(f.a.mark(function t(n,r){var a,s,i,o,l,c,u,p,m,d;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inited){t.next=3;break}return console.log("RPC is not initialized"),t.abrupt("return");case 3:return console.log("===rpc===",n.url,n.body),t.prev=4,a=n.body,s=a.controller,i=a.action,o=a.data,l=n.cookies.JWT,c=e.route(s,i),u=c.handler,t.next=11,e.auth(c,l);case 11:if(p=t.sent,m=p.status,d=p.user,o.userByToken=d,u){t.next=19;break}r.status(404).json({result:void 0,error:"undefined handler"}),t.next=35;break;case 19:if(m){t.next=23;break}r.status(401).json({result:void 0,error:"access denied"}),t.next=35;break;case 23:if(!u||!m){t.next=34;break}return t.t0=r,t.next=27,u(e.db,n,r,o);case 27:if(t.t1=t.sent,t.t1){t.next=30;break}t.t1={};case 30:t.t2=t.t1,t.t0.json.call(t.t0,t.t2),t.next=35;break;case 34:r.status(500).json({error:"auth error"});case 35:t.next=41;break;case 37:t.prev=37,t.t3=t.catch(4),console.log(t.t3),r.status(500).json({error:"unknown error"});case 41:case"end":return t.stop()}},t,this,[[4,37]])}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),K=n(0),ee=n.n(K),te=n(19),ne=n.n(te),re=n(8),ae=n(5),se=n.n(ae),ie=n(6),oe=n.n(ie),le=n(7),ce=n.n(le),ue=n(10),pe=n.n(ue),fe=n(12),me=n.n(fe),de=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"render",value:function(){return ee.a.createElement(re.Link,{to:"/",className:"c--logo"},ee.a.createElement("div",null,ee.a.createElement("span",null,"For"),ee.a.createElement("span",null,"Me"),ee.a.createElement("span",null,"Too")),ee.a.createElement("div",null,"интернет-магазин"))}}]),t}(ee.a.Component),ge=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={focused:!1},n.onFocus=function(e){return n.setState({focused:!0})},n.onBlur=function(e){return n.setState({focused:!1})},n}return ce()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.button,r=e.value,a=e.placeholder,s=this.state.focused;return ee.a.createElement("div",{className:"c--input"},ee.a.createElement("input",{value:r,placeholder:a,onChange:function(e){return t(e.target.value)},onFocus:this.onFocus,onBlur:this.onBlur}),n?ee.a.createElement("button",null,n):null,ee.a.createElement("div",{className:"line ".concat(s?"focused":"")}),ee.a.createElement("div",{className:"static-line"}))}}]),t}(ee.a.Component),he=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={query:""},n.onChange=function(e){return n.setState({query:e})},n}return ce()(t,e),y()(t,[{key:"render",value:function(){var e=this.state.query,t=ee.a.createElement(re.Link,{to:"/catalog?query=".concat(e),className:"icon search c--search-btn"});return ee.a.createElement(ee.a.Fragment,null,ee.a.createElement(ge,{value:e,placeholder:"Поиск",onChange:this.onChange,button:t}))}}]),t}(ee.a.Component),ve=n(20),ye=n.n(ve),be=function(e){function t(e){var n;(h()(this,t),(n=se()(this,oe()(t).call(this,e))).inverseHorisontal={right:"left",left:"right"},n.inverseVertical={top:"bottom",bottom:"top"},n.state={open:!1,horisontal:"left",vertical:"top"},"string"==typeof e.position)&&e.position.split(" ").forEach(function(e){n.inverseHorisontal[e]?n.state.horisontal=n.inverseHorisontal[e]:n.inverseVertical[e]&&(n.state.vertical=n.inverseVertical[e])});return n.closeAtOutclick=function(e){return!n.thisDOMel.contains(e.target)&&n.setState({open:!1})},n}return ce()(t,e),y()(t,[{key:"componentDidMount",value:function(){this.thisDOMel=ye.a.findDOMNode(this),window.addEventListener("click",this.closeAtOutclick)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n={};"string"==typeof e.position?e.position.split(" ").forEach(function(e){t.inverseHorisontal[e]?n.horisontal=t.inverseHorisontal[e]:t.inverseVertical[e]&&(n.vertical=t.inverseVertical[e])}):(n.horisontal="left",n.vertical="top");this.setState(n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.closeAtOutclick)}},{key:"toggleOpen",value:function(){var e={open:!this.props.disabled&&!this.state.open};if(!this.props.position){var t=this.thisDOMel.getBoundingClientRect(),n=t.x,r=t.y,a=document.body.getBoundingClientRect(),s=a.height,i=a.width/2,o=s/2;e.horisontal=i&&n&&n<i?"left":"right",e.vertical=o&&r?r<o?"top":"bottom":"top"}this.setState(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=void 0===n?"":n,a=t.style,s=t.children,i=t.icon,o=void 0===i||i,l=this.state,c=l.open,u=l.horisontal,p=l.vertical,f=[],m=[];ee.a.Children.forEach(s,function(e){return(e&&e.props&&"toggle"===e.props.role?f:m).push(e)});var d={};return d[u]=0,d[p]="100%",ee.a.createElement("div",{className:"c--dropdown ".concat(r),style:a,onClick:function(t){return e.toggleOpen()}},ee.a.createElement("div",{className:"toggle"},ee.a.createElement("div",null,f),o?ee.a.createElement("div",{className:"icon angle_down ".concat(c?"open":"")}):null),c?ee.a.createElement("div",{className:"content",style:d},m):null)}}]),t}(ee.a.Component),xe=n(21),ke=function(){function e(){h()(this,e),xe.defaults.headers.post["Access-Control-Allow-Origin"]="*",xe.defaults.headers.post["Content-Type"]="application/json"}return y()(e,null,[{key:"request",value:function(){var e=d()(f.a.mark(function e(){var t,n,r,a,s=arguments;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=3,e.next=6,xe.post("/api",{controller:t,action:n,data:r});case 6:return a=e.sent,e.abrupt("return",{error:a.data.error,data:a.data.result});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{error:e.t0,data:void 0});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}()}]),e}(),we=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={products:[],count:void 0,sum:void 0},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r,a,s,i,o,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.request("cart","info");case 2:t=e.sent,n=t.error,r=t.data,a=void 0===r?{}:r,n||(s=a.products,i=void 0===s?[]:s,o=a.count,l=a.sum,this.setState({products:i,count:o,sum:l}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.products,n=e.count,r=e.sum;return ee.a.createElement(be,{open:"false",className:"user_btn lng_btn",icon:!1},ee.a.createElement("div",{className:"toggle btn-group",role:"toggle"},ee.a.createElement("div",{className:"c--cart"},ee.a.createElement("span",{className:"icon cart"}),ee.a.createElement("div",null,t.length>0?ee.a.createElement(ee.a.Fragment,null,ee.a.createElement("div",null,ee.a.createElement("span",{className:"icon gift-box"}),ee.a.createElement("span",null,n)),ee.a.createElement("div",null,ee.a.createElement("span",{className:"icon money"}),ee.a.createElement("span",null,r))):ee.a.createElement(ee.a.Fragment,null,ee.a.createElement("div",null,"Корзина"),ee.a.createElement("div",null,"пуста"))))),ee.a.createElement("div",{className:"content-wrapper",role:"content"},t.length>0?t.map(function(e,t){return ee.a.createElement("div",{key:t,className:"item"},ee.a.createElement(re.Link,{to:"/catalog/product/".concat(e.slug)},e.name),ee.a.createElement("div",null,ee.a.createElement("input",{value:e.count}),"*",ee.a.createElement("span",null,e.price),"=",ee.a.createElement("span",null,e.count*e.price)))}):ee.a.createElement(ee.a.Fragment,null,ee.a.createElement("div",null,"Корзина"),ee.a.createElement("div",null,"пуста"))))}}]),t}(ee.a.Component),Ee=function(e){function t(e){var n;return h()(this,t),n=se()(this,oe()(t).call(this,e)),me()(pe()(pe()(n)),"data",{menu:[{title:"Главная",to:"/",exact:!0},{title:"Каталог",to:"/catalog"},{title:"Акции",to:"/promotion"},{title:"Доставка и оплата",to:"/delivery"},{title:"О компании",to:"/about"},{title:"Контакты",to:"/contacts"}]}),n.state={menu:void 0},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.request("content","main-menu");case 2:t=e.sent,n=t.error,r=t.data,n||this.setState({menu:r});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.menu;return ee.a.createElement("nav",{className:"c--main-menu"},e?e.map(function(e,t){return ee.a.createElement(re.NavLink,{key:t,to:"/".concat(e.slug),exact:""===e.slug,activeClassName:"active"},e.name)}):null)}}]),t}(ee.a.Component),ze=function(e){function t(e){var n;return h()(this,t),n=se()(this,oe()(t).call(this,e)),me()(pe()(pe()(n)),"data",{userLocation:"Москва",address:"127000, Москва, ул.Ленинградская, д.157, этаж 3, оф.378",phone:"+7-(495)-378-92-96",count:7,cost:13e4}),n}return ce()(t,e),y()(t,[{key:"render",value:function(){var e=this.data,t=e.userLocation,n=e.address,r=e.phone,a=e.count,s=e.cost;return ee.a.createElement("header",{className:"s--header"},ee.a.createElement("div",{className:"actions"},ee.a.createElement("div",null,ee.a.createElement("span",null,"Ваш город:"),ee.a.createElement("span",null," ".concat(t))),ee.a.createElement("div",null,n),ee.a.createElement("div",null,r),ee.a.createElement("div",null,ee.a.createElement(re.Link,{to:"/account/registration"},"Регистрация"),"|",ee.a.createElement(re.Link,{to:"/account/login"},"Войти"))),ee.a.createElement("div",{className:"search"},ee.a.createElement(de,null),ee.a.createElement(he,null),ee.a.createElement(we,{count:a,cost:s})),ee.a.createElement("div",{className:"menu"},ee.a.createElement(Ee,null)))}}]),t}(ee.a.Component),Se=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"render",value:function(){return ee.a.createElement("div",{className:"c--loading"},ee.a.createElement("div",null,ee.a.createElement("span",{className:"icon spinner"})))}}]),t}(ee.a.Component),qe=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={loading:!0,page:void 0},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.slug!==e.match.params.slug&&this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r,a,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,page:void 0}),t=this.props.match.params.slug,n=void 0===t?"":t,e.next=4,ke.request("content","page",{slug:n});case 4:r=e.sent,a=r.error,s=r.data,a||this.setState({loading:!1,page:s});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.page;return t?ee.a.createElement(Se,null):n.title||n.content?ee.a.createElement("div",{className:"s--page"},n.title?ee.a.createElement("h3",null,n.title):null,n.content?ee.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.content}}):null):null}}]),t}(ee.a.Component),Ne=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={loading:!0,categoryList:[]},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.request("catalog","categories");case 2:t=e.sent,n=t.error,r=t.data,n||this.setState({loading:!1,categoryList:r});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.categoryList,n=e.loading;return ee.a.createElement("div",{className:"s--category-list"},n?ee.a.createElement(Se,null):t.map(function(e,t){return ee.a.createElement("div",{key:t,className:"item"},ee.a.createElement("div",null,ee.a.createElement("img",{alt:e.name,src:e.img})),ee.a.createElement("div",null,ee.a.createElement(re.Link,{to:"/catalog/".concat(e.slug)},e.name)))}))}}]),t}(ee.a.Component),Ae=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={loading:!0,productList:[]},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.slug!==e.match.params.slug&&this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r,a,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,productList:[]}),t=this.props.match.params.slug,n=void 0===t?"":t,e.next=4,ke.request("catalog","category",{slug:n});case 4:r=e.sent,a=r.error,s=r.data,a||this.setState({loading:!1,productList:s});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.productList,n=e.loading;return ee.a.createElement("div",{className:"s--products-list"},n?ee.a.createElement(Se,null):t&&t.length>0?t.map(function(e,t){return ee.a.createElement("div",{key:t,className:"item"},ee.a.createElement("div",null,ee.a.createElement("img",{alt:e.name,src:e.media[0]})),ee.a.createElement("div",null,ee.a.createElement(re.Link,{to:"/catalog/product/".concat(e.slug)},e.name),ee.a.createElement("div",null,"Артикул:",e.code),ee.a.createElement("div",null,"Цена:",e.price),e.props.slice(0,2).map(function(e,t){return ee.a.createElement("div",null,"".concat(e.name,":").concat(e.value))})))}):"nothing to show")}}]),t}(ee.a.Component),Te=function(e){function t(e){var n;return h()(this,t),(n=se()(this,oe()(t).call(this,e))).state={loading:!0,product:void 0},n}return ce()(t,e),y()(t,[{key:"componentWillMount",value:function(){this.getInitialDataFromSrv()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.slug!==e.match.params.slug&&this.getInitialDataFromSrv()}},{key:"getInitialDataFromSrv",value:function(){var e=d()(f.a.mark(function e(){var t,n,r,a,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,product:void 0}),t=this.props.match.params.slug,n=void 0===t?"":t,e.next=4,ke.request("catalog","product",{slug:n});case 4:r=e.sent,a=r.error,s=r.data,a||this.setState({loading:!1,product:s});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.product,n=e.loading;return ee.a.createElement("div",{className:"s--product"},n?ee.a.createElement(Se,null):t?ee.a.createElement("div",{className:"item"},ee.a.createElement("div",null,ee.a.createElement("img",{alt:t.name,src:t.media[0]})),ee.a.createElement("div",null,ee.a.createElement("h4",{to:"/catalog/product/".concat(t.slug)},t.name),ee.a.createElement("div",null,"Артикул:",t.code),ee.a.createElement("div",null,"Цена:",t.price),t.props.map(function(e,t){return ee.a.createElement("div",{key:t},"".concat(e.name,":").concat(e.value))}))):"nothing to show")}}]),t}(ee.a.Component),_e=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"render",value:function(){return ee.a.createElement(re.Switch,null,ee.a.createElement(re.Route,{exact:!0,path:"/catalog",component:Ne}),ee.a.createElement(re.Route,{exact:!0,path:"/catalog/:slug",component:Ae}),ee.a.createElement(re.Route,{exact:!0,path:"/catalog/product/:slug",component:Te}))}}]),t}(ee.a.Component),Oe=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"render",value:function(){return ee.a.createElement("main",{className:"s--main"},ee.a.createElement(re.Switch,null,ee.a.createElement(re.Route,{exact:!0,path:"/:slug",component:qe}),ee.a.createElement(re.Route,{exact:!0,path:"/",component:qe})),ee.a.createElement(re.Switch,null,ee.a.createElement(re.Route,{path:"/catalog",component:_e})))}}]),t}(ee.a.Component),je=function(e){function t(e){var n;return h()(this,t),n=se()(this,oe()(t).call(this,e)),me()(pe()(pe()(n)),"data",{footerContacts:{title:"Контакты",address:"127000, Москва, ул.Ленинградская, д.157, этаж 3, оф.378",phone:"+7 (495)378-92-96"},footerLinks:[{title:"Компания",links:[{title:"О компании",url:"/about"},{title:"Новости",url:"/news"},{title:"Вакансии",url:"/jobs"}]},{title:"Информация",links:[{title:"Помощь",url:"/help"},{title:"Оплата и доставка",url:"/info"},{title:"Гарантия на товар",url:"/warrantly"}]},{title:"Помощь",links:[{title:"Блог",url:"/blog"},{title:"Вопрос-ответ",url:"/faq"},{title:"Бренды",url:"/brends"}]}]}),n}return ce()(t,e),y()(t,[{key:"render",value:function(){var e=this.data,t=e.footerLinks,n=e.footerContacts;return ee.a.createElement("footer",{className:"s--footer"},ee.a.createElement("div",{className:"links"},t.map(function(e,t){return ee.a.createElement("div",{key:t},ee.a.createElement("h5",null,e.title),ee.a.createElement("div",null,e.links.map(function(e,t){return ee.a.createElement(re.Link,{key:t,to:e.url},e.title)})))}),ee.a.createElement("div",null,ee.a.createElement("h5",null,n.title),ee.a.createElement("div",null,ee.a.createElement("span",null,n.address),ee.a.createElement("span",null,n.phone)))),ee.a.createElement("div",{className:"rights"},ee.a.createElement("span",null,"2017 © ForMeToo. Все права защищены.")))}}]),t}(ee.a.Component),He=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return ee.a.createElement(ee.a.Fragment,null,ee.a.createElement(ze,null),ee.a.createElement(Oe,null),ee.a.createElement(je,null))}}]),t}(ee.a.Component),De=function(e){function t(e){return h()(this,t),se()(this,oe()(t).call(this,e))}return ce()(t,e),y()(t,[{key:"render",value:function(){return ee.a.createElement(re.Route,{path:"/",component:He})}}]),t}(ee.a.Component),Ie=n(16),Ce=n(22);Z.init();var Re=s()(),Be=s.a.Router();Be.use(s.a.static(o.a.resolve("build","public"),{maxAge:"30d"})),Be.get("*",function(e,t,n){console.log("===render===",e.url);var r=Ie.resolve("build","public","index.html");Ce.readFile(r,"utf8",function(n,r){if(n)return console.error("err",n),t.status(404).end();var a={status:200},s=ne.a.renderToString(ee.a.createElement(re.StaticRouter,{basename:"",location:e.url,context:a},ee.a.createElement(De,null)));return t.status(a.status).send(r.replace('<div id="app"></div>','<div id="app">'.concat(s,"</div>")))})}),Be.use(c()()),Be.use(s.a.json()),Be.post("/api/",Z.router),Re.use(Be),Re.listen(u.connection.port,function(e){if(e)return console.log("something bad happened",e);console.log("listening on "+u.connection.port+"...")})}]);